{% extends "base.html" %}

{% block title %}Inicio | Portal Usuarios{% endblock title %}

{% block content %}
  <div class="row g-4 align-items-stretch mb-3">
    <div class="col-lg-8">
      <div class="card hero-card h-100 portal-card border-0">
        <div class="card-body p-4 p-lg-5">
          <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3">
            <div>
              <span class="badge-soft">Panel principal</span>
              <h1 class="display-6 fw-semibold my-3">{{ saludo }}</h1>
              <p class="mb-4 text-light">Administra tus usuarios, consulta métricas y accede rápidamente a tus acciones frecuentes.</p>
              <div class="d-flex flex-wrap gap-2">
                <a class="btn btn-portal" href="{% url 'inicio' %}">Empezar</a>
                {% if tiene_permiso %}
                  <a class="btn btn-light" href="{% url 'usuarios_lista' %}">Administrar usuarios</a>
                {% endif %}
                <a class="btn btn-outline-light" href="{% url 'perfil' %}">Ver mi perfil</a>
              </div>
            </div>
            <div class="text-md-end">
              <p class="mb-2 text-light opacity-75">Estado actual</p>
              <div class="display-5 fw-bold hero-highlight">{{ usuarios_activos }}</div>
              <small class="d-block text-light">Usuarios activos en este momento</small>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="card portal-card h-100 border-0">
        <div class="card-body p-4">
          <div class="d-flex align-items-center justify-content-between mb-3">
            <div>
              <p class="stat-label mb-1">Usuarios totales</p>
              <div class="stat-value">{{ usuarios_totales }}</div>
            </div>
            <div class="text-end">
              <span class="badge-soft">Activos: {{ usuarios_activos }}</span>
            </div>
          </div>
          <div class="row g-3">
            <div class="col-6">
              <div class="border rounded-3 p-3 h-100 bg-light">
                <p class="stat-label mb-1">Inactivos</p>
                <p class="h4 mb-0">{{ usuarios_inactivos }}</p>
              </div>
            </div>
            <div class="col-6">
              <div class="border rounded-3 p-3 h-100 bg-light">
                <p class="stat-label mb-1">Gestores</p>
                <p class="h4 mb-0">{{ gestores }}</p>
              </div>
            </div>
            <div class="col-12">
              <div class="d-flex align-items-center justify-content-between border rounded-3 p-3">
                <div>
                  <p class="stat-label mb-1">Administradores</p>
                  <p class="h4 mb-0">{{ administradores }}</p>
                </div>
                <span class="badge bg-primary-subtle text-primary">Acceso total</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row g-3">
    <div class="col-md-6 col-lg-3">
      <div class="card portal-card stat-card h-100">
        <div class="card-body">
          <p class="stat-label mb-2">Usuarios totales</p>
          <h2 class="fw-bold mb-1">{{ usuarios_totales }}</h2>
          <p class="mb-0 text-muted">Cuenta de usuarios registrados</p>
        </div>
      </div>
    </div>
    <div class="col-md-6 col-lg-3">
      <div class="card portal-card stat-card h-100">
        <div class="card-body">
          <p class="stat-label mb-2">Usuarios activos</p>
          <h2 class="fw-bold mb-1">{{ usuarios_activos }}</h2>
          <p class="mb-0 text-muted">Con acceso permitido</p>
        </div>
      </div>
    </div>
    <div class="col-md-6 col-lg-3">
      <div class="card portal-card stat-card h-100">
        <div class="card-body">
          <p class="stat-label mb-2">Usuarios inactivos</p>
          <h2 class="fw-bold mb-1">{{ usuarios_inactivos }}</h2>
          <p class="mb-0 text-muted">Requieren revisión</p>
        </div>
      </div>
    </div>
    <div class="col-md-6 col-lg-3">
      <div class="card portal-card stat-card h-100">
        <div class="card-body">
          <p class="stat-label mb-2">Perfiles por rol</p>
          <div class="d-flex align-items-baseline gap-2 mb-1">
            <span class="fw-bold h4 mb-0">{{ administradores }}</span>
            <small class="text-muted">Administradores</small>
          </div>
          <div class="d-flex align-items-baseline gap-2">
            <span class="fw-bold h5 mb-0">{{ gestores }}</span>
            <small class="text-muted">Gestores</small>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
